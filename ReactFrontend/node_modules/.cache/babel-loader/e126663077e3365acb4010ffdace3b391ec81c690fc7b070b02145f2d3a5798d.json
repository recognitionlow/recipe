{"ast":null,"code":"var _jsxFileName = \"E:\\\\school\\\\CSC309\\\\Project\\\\p3\\\\ReactFrontend\\\\src\\\\components\\\\RecipeCard\\\\index.js\",\n  _s = $RefreshSig$();\nimport { React, useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faHeart as farHeart } from '@fortawesome/free-regular-svg-icons';\nimport { faHeart as fasHeart } from '@fortawesome/free-solid-svg-icons';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RecipeCard = _ref => {\n  _s();\n  let {\n    recipe\n  } = _ref;\n  const [authenticated, setAuthenticated] = useState(false);\n  const [favorite, setFavorite] = useState({\n    favorited: false,\n    favoriteid: null\n  });\n  const navigate = useNavigate();\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    // fetch from isfavorited endpoint\n    fetch(`http://127.0.0.1:8000/userdata/${recipe.id}/is-favorited/`, {\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    }).then(response => {\n      if (response.ok) {\n        setAuthenticated(true);\n        return response.json().then(data => {\n          setFavorite({\n            favorited: data.favorited,\n            favoriteid: data.frid\n          });\n        });\n      } else {\n        setAuthenticated(false);\n      }\n    });\n  }, []);\n  const handleCardClick = e => {\n    e.preventDefault();\n    navigate(`/recipes/${recipe.id}/details`);\n  };\n  const handleFavClick = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    const token = localStorage.getItem('token');\n    if (favorite.favorited) {\n      fetch(`http://127.0.0.1:8000/userdata/favorited-recipe=${favorite.favoriteid}/RD-favorited-recipe/`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      then(response => {\n        if (response.status === 204) {\n          setFavorite({\n            favorited: false,\n            favoriteid: null\n          });\n        } else {\n          return response.json().then(data => {\n            console.log(data.detail);\n          });\n        }\n      });\n    } else {\n      fetch(`http://127.0.0.1:8000/userdata/recipe=${recipe.id}/create-favorited-recipe/`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      then(response => {\n        if (response.ok) {\n          return response.json().then(data => {\n            setFavorite({\n              favorited: true,\n              favoriteid: data.id\n            });\n          });\n        } else {\n          return response.json().then(data => {\n            console.log(data.detail);\n          });\n        }\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card\",\n    onClick: handleCardClick,\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      className: \"card-img-top\",\n      src: recipe.picture,\n      alt: \"Card image\",\n      style: {\n        width: '100%'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-body\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"card-title\",\n        children: recipe.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"card-text\",\n        children: [\"Cooking Time: \", recipe.time, \" \", recipe.time_unit]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        style: {\n          paddingTop: '1em'\n        },\n        children: [authenticated && /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: favorite.favorited ? fasHeart : farHeart,\n          onClick: handleFavClick\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 39\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-sm\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Rating: \", recipe.rating]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-sm\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Likes: \", recipe.likes]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 9\n  }, this);\n};\n_s(RecipeCard, \"BgjpGgnhX9CTpLFUzMTpARdeZSg=\", false, function () {\n  return [useNavigate];\n});\n_c = RecipeCard;\nexport default RecipeCard;\nvar _c;\n$RefreshReg$(_c, \"RecipeCard\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","FontAwesomeIcon","faHeart","farHeart","fasHeart","jsxDEV","_jsxDEV","RecipeCard","_ref","_s","recipe","authenticated","setAuthenticated","favorite","setFavorite","favorited","favoriteid","navigate","token","localStorage","getItem","fetch","id","headers","then","response","ok","json","data","frid","handleCardClick","e","preventDefault","handleFavClick","stopPropagation","status","console","log","detail","className","onClick","children","src","picture","alt","style","width","fileName","_jsxFileName","lineNumber","columnNumber","title","time","time_unit","paddingTop","icon","rating","likes","_c","$RefreshReg$"],"sources":["E:/school/CSC309/Project/p3/ReactFrontend/src/components/RecipeCard/index.js"],"sourcesContent":["import {React, useEffect, useState} from 'react';\r\nimport {useNavigate} from 'react-router-dom';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faHeart as farHeart } from '@fortawesome/free-regular-svg-icons';\r\nimport { faHeart as fasHeart } from '@fortawesome/free-solid-svg-icons';\r\n\r\nconst RecipeCard = ({recipe}) => {\r\n    const [authenticated, setAuthenticated] = useState(false)\r\n    const [favorite, setFavorite] = useState({favorited: false, favoriteid: null})\r\n    const navigate = useNavigate();\r\n    useEffect(() => {\r\n        const token = localStorage.getItem('token');\r\n        // fetch from isfavorited endpoint\r\n        fetch(`http://127.0.0.1:8000/userdata/${recipe.id}/is-favorited/`, {\r\n            headers: {\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n        })\r\n        .then(response => {\r\n            if (response.ok) {\r\n                setAuthenticated(true);\r\n                return response.json().then((data) => {\r\n                    setFavorite({favorited: data.favorited, favoriteid: data.frid})\r\n                })\r\n            }\r\n            else {\r\n                setAuthenticated(false)\r\n            }\r\n        })\r\n    }, [])\r\n\r\n    const handleCardClick = (e) => {\r\n        e.preventDefault();\r\n        navigate(`/recipes/${recipe.id}/details`);\r\n    }\r\n\r\n    const handleFavClick = (e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        const token = localStorage.getItem('token');\r\n        if (favorite.favorited) {\r\n            fetch(`http://127.0.0.1:8000/userdata/favorited-recipe=${favorite.favoriteid}/RD-favorited-recipe/`, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`\r\n                }\r\n            })\r\n            then(response => {\r\n                if (response.status === 204) {\r\n                    setFavorite({favorited: false, favoriteid: null})\r\n                }\r\n                else {\r\n                    return response.json().then((data) => {\r\n                        console.log(data.detail)\r\n                    })\r\n                }\r\n            })\r\n        }\r\n        else {\r\n            fetch(`http://127.0.0.1:8000/userdata/recipe=${recipe.id}/create-favorited-recipe/`, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`\r\n                }\r\n            })\r\n            then(response => {\r\n                if (response.ok) {\r\n                    return response.json().then((data) => {\r\n                        setFavorite({favorited: true, favoriteid: data.id})\r\n                    })\r\n                }\r\n                else {\r\n                    return response.json().then((data) => {\r\n                        console.log(data.detail)\r\n                    })\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"card\" onClick={handleCardClick}>\r\n            <img className=\"card-img-top\" src={recipe.picture} alt=\"Card image\" style={{ width: '100%' }}/>\r\n            <div className=\"card-body\">\r\n                <h4 className=\"card-title\">{recipe.title}</h4>\r\n                <p className=\"card-text\">Cooking Time: {recipe.time} {recipe.time_unit}</p>\r\n                \r\n                <div className=\"row\" style={{ paddingTop: '1em' }}>\r\n                    {authenticated && <FontAwesomeIcon icon={favorite.favorited ? fasHeart : farHeart} onClick={handleFavClick}/>}\r\n                    <div className=\"col-sm\">\r\n                        <p>Rating: {recipe.rating}</p>\r\n                    </div>\r\n                    <div className=\"col-sm\">\r\n                        <p>Likes: {recipe.likes}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default RecipeCard"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}